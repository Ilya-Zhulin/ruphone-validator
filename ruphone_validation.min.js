/* Created by Ilya A.Zhulin <ilya.zhulin@hotmail.com> 2020 */
jQuery(document).ready(function(){function b(a,b,c){a.length>b&&a[b]!=c&&a.splice(b,0,c);return a}var c,d;document.querySelector("input[type='tel'], input[data-type='tel']")&&(document.querySelector("input[type='tel'], input[data-type='tel']").onselect=function(){c=document.querySelector("input[type='tel'], input[data-type='tel']").selectionStart;d=document.querySelector("input[type='tel'], input[data-type='tel']").selectionEnd});jQuery("input[type='tel'], input[data-type='tel']").on("input",function(a,
e){$this=jQuery(this);allows="1234567890".split("");key=a.originalEvent.data;$caret=a.target.selectionStart;$val=$this.val();rep="";c&&d&&(rep=0<d-c?Array(d-c).join("_"):"");"deleteContentBackward"==a.originalEvent.inputType?($val=$val.substr(0,$caret)+"_"+rep+$val.substr($caret),a.preventDefault()):-1<$val.indexOf("_")&&($val=$val.substr(0,$caret)+$val.substr($caret).replace("_",""));val=$val.replace(/\s/g,"").replace("+","").replace("(","").replace(")","").replace(/\-/g,"");val=11<=val.length?val=
val.substr(0,11):val;-1==jQuery.inArray(key,allows)&&(a.preventDefault(),val=val.replace(key,""));ar=val.split("");if(0==ar.join("").replace(/_/g,"").length||"+"==ar.join("").replace(/_/g,""))ar=[];0<ar.length&&(8!=ar[0]&&7!=ar[0]&&"+"!=ar[0]&&(tmp=ar[0],ar[0]="7",ar[1]=tmp,$caret=5),ar=b(ar,1," "),ar=b(ar,2,"("),ar=b(ar,6,")"),ar=b(ar,7," "),ar=b(ar,11,"-"),ar=b(ar,14,"-"));a.preventDefault();$new_val="7"==ar[0]||0===ar.length?"+"+ar.join(""):ar.join("");"+"==$new_val&&"+"!=key&&($new_val="");$this.val($new_val);
$new_caret="deleteContentBackward"==a.originalEvent.inputType?8==ar[0]?2==$caret?1:7==$caret?6:12==$caret?11:15==$caret?14:$caret:3==$caret?2:8==$caret?7:13==$caret?12:16==$caret?15:1==$caret?3:$caret:8==ar[0]?2==$caret?4:7==$caret?9:12==$caret?13:15==$caret?16:$caret:3==$caret?5:8==$caret?"10":13==$caret?14:"16"==$caret?17:$caret;jQuery(this)[0].setSelectionRange($new_caret,$new_caret)})});